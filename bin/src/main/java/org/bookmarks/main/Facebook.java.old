package org.bookmarks.main;

import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.conf.ConfigurationBuilder;

import com.restfb.DefaultFacebookClient;
import com.restfb.FacebookClient;
import com.restfb.FacebookClient.AccessToken;
import com.restfb.Parameter;
import com.restfb.types.FacebookType;
import com.restfb.types.Page;
import com.restfb.types.User;

import com.rosaloves.bitlyj.Url;
import static com.rosaloves.bitlyj.Bitly.*;

public class Facebook {
	//look in https://apps.facebook.com/app_name to give user permission
	public static void main(String[] args) {
		String API_KEY = "322316781188071";
		String SECRET = "793738accd0e3ad688b839675bdfcb5c";
		AccessToken token = new DefaultFacebookClient().obtainAppAccessToken(API_KEY, SECRET);
		
		System.out.println(token.getAccessToken());		
		FacebookClient facebookClient = new DefaultFacebookClient(token.getAccessToken()); //this represents the app
//		
//		User user = facebookClient.fetchObject("me", User.class);
//		Page page = facebookClient.fetchObject("cocacola", Page.class);
//
//		/*FacebookType publishMessageResponse =
//				  facebookClient.publish("me/feed", FacebookType.class,
//				    Parameter.with("message", "RestFB test"));
//		*/
//		System.out.println("User name: " + user.getName());
//		System.out.println("Page likes: " + page.getLikes());
//		FacebookClient facebookClient = new DefaultFacebookClient("322316781188071|efDyPrlP1qEtbbICeiRugBM8G9Y");
		
//		User user = facebookClient.fetchObject("me", User.class);
//		Page page = facebookClient.fetchObject("cocacola", Page.class);

//		FacebookType publishMessageResponse =
////				  facebookClient.publish("600868412/feed", FacebookType.class,
//				  facebookClient.publish("100002830920984/feed", FacebookType.class,
//				  Parameter.with("message", "RestFB test again"));
//		//Id of user (socailist worker
//		System.out.println("User name: " + user.getName());
//		System.out.println("Page likes: " + page.getLikes());
		//System.out.println(publishMessageResponse);
		
		
		//Twitter


		Url url = as("jbeaken", "R_3dc8544107516f122fab2eeda6481f3a").call(shorten("http://socialistworker.co.uk/art/34448/Six+weeks+to+stop+Tories+selling+off+Royal+Mail"));

		System.out.println(url.getShortUrl()); // -> http://bit.ly/fB05
		
		ConfigurationBuilder cb = new ConfigurationBuilder();
		cb.setDebugEnabled(true)
		  .setOAuthConsumerKey("0Y6Pw3M0V9jp9MmGBVMRdw")
		  .setOAuthConsumerSecret("haTDKdfSpT0UBYYhwJx9uPPYCJVMtsTMxzzgMFaWR5k")
		  .setOAuthAccessToken("622062638-tbVAYNtP9jeUjVyUo1HFWfFPiz5csAKt5W9QH93W")
		  .setOAuthAccessTokenSecret("olpElLVceCu8cyAwszCcyVjzMUTxal12ro9YoNJ8");
		TwitterFactory tf = new TwitterFactory(cb.build());
		Twitter twitter = tf.getInstance();
		Status status = null;
//		try {
////			status = twitter.updateStatus("Is playing the xylophone");
//			status = twitter.updateStatus("Six weeks to stop Tories selling off Royal Mail http://socialistworker.co.uk/art/34448/Six+weeks+to+stop+Tories+selling+off+Royal+Mail");
//		} catch (TwitterException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
		    System.out.println("Successfully updated the status to [" + status.getText() + "].");
	}

}
//https://graph.facebook.com/oauth/authorize?client_id=322316781188071& redirect_uri=http://www.facebook.com/connect/login_success.html& scope=publish_stream